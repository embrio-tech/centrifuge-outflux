{
  "model": "Entity",
  "pipeline": [
    {
      "$match": {
        "type": "loan"
      }
    },
    {
      "$lookup": {
        "from": "sources",
        "localField": "_id",
        "foreignField": "entity",
        "as": "source"
      }
    },
    {
      "$unwind": "$source"
    },
    {
      "$match": {
        "source.type": "pod"
      }
    },
    {
      "$lookup": {
        "from": "frames",
        "localField": "source._id",
        "foreignField": "source",
        "as": "frames"
      }
    }
  ]
}
